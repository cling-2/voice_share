{% extends "layout.html" %}
{% block title %}{{ '管理员' if page == 'admin' else '用户' }}登录{% endblock %}

{% block content %}
<div class="auth-container" style="display: flex; justify-content: center; padding-top: 4rem;">
  <section class="auth-card" style="width: 100%; max-width: 400px;">

    <div class="auth-header" style="text-align: center; margin-bottom: 2rem;">
      <div class="auth-icon" style="font-size: 3rem; color: var(--brand); margin-bottom: 0.5rem;">
        <i class="{{ 'ri-admin-line' if page == 'admin' else 'ri-login-circle-line' }}"></i>
      </div>
      <h1 style="font-size: 1.5rem; margin: 0; color: var(--text);">
        {{ '管理员后台' if page == 'admin' else '欢迎回来' }}
      </h1>
      <p style="color: var(--muted); margin-top: 0.5rem; font-size: 0.9rem;">
        {{ '请登录以管理系统' if page == 'admin' else '登录账号继续音乐之旅' }}
      </p>
    </div>

    <form method="post" class="modern-form">
      {{ form.hidden_tag() }}

      <div class="form-group" style="margin-bottom: 1.2rem;">
        <label class="form-label" style="font-weight: 600; font-size: 0.9rem; margin-bottom: 0.4rem; display: block;">
          <i class="ri-user-line" style="color: var(--muted); margin-right: 4px;"></i> {{ form.username.label }}
        </label>
        {{ form.username(class="input", placeholder="请输入账号", style="width: 100%;") }}
        {% for error in form.username.errors %}
          <div class="error-msg" style="color: #ef4444; font-size: 0.85rem; margin-top: 0.25rem;">
            <i class="ri-error-warning-fill"></i> {{ error }}
          </div>
        {% endfor %}
      </div>

      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label class="form-label" style="font-weight: 600; font-size: 0.9rem; margin-bottom: 0.4rem; display: block;">
          <i class="ri-lock-password-line" style="color: var(--muted); margin-right: 4px;"></i> {{ form.password.label }}
        </label>
        {{ form.password(class="input", placeholder="请输入密码", style="width: 100%;") }}
        {% for error in form.password.errors %}
          <div class="error-msg" style="color: #ef4444; font-size: 0.85rem; margin-top: 0.25rem;">
            <i class="ri-error-warning-fill"></i> {{ error }}
          </div>
        {% endfor %}
      </div>

      <button type="submit" class="primary-btn" style="width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem; padding: 0.8rem;">
        <span>登录</span> <i class="ri-arrow-right-line"></i>
      </button>

      {% if page != 'admin' %}
        <div style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem;">
          <span style="color: var(--muted);">还没有账号？</span>
          <a href="{{ url_for('auth.register') }}" style="color: var(--brand); font-weight: 600; text-decoration: none;">立即注册</a>
        </div>
      {% else %}
        <div style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem;">
          <a href="{{ url_for('auth.login') }}" style="color: var(--muted); text-decoration: none; font-size: 0.85rem;">
            <i class="ri-arrow-left-line"></i> 返回用户登录
          </a>
        </div>
      {% endif %}

    </form>
  </section>
</div>
{% endblock %}